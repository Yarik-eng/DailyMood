<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}DailyMood{% endblock %}</title>
    <!-- Tell Tailwind to use class-based dark mode, then load the CDN -->
    <script>
      window.tailwind = window.tailwind || {};
      tailwind.config = tailwind.config || {};
      tailwind.config.darkMode = 'class';
    </script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}?v={{ static_version }}">
    <script src="{{ url_for('static', filename='translations/uk_fixed.js') }}?v={{ static_version }}"></script>
    <script src="{{ url_for('static', filename='translations/en_fixed.js') }}?v={{ static_version }}"></script>
    <script src="{{ url_for('static', filename='translations/quotes.js') }}?v={{ static_version }}"></script>
    <script src="{{ url_for('static', filename='js/i18n_fixed.js') }}?v={{ static_version }}"></script>
    {% block extra_head %}{% endblock %}
</head>
<body class="min-h-screen bg-gradient-to-b from-indigo-50 to-white text-gray-800 dark:bg-gray-900 dark:text-gray-100">
    <div class="container" role="application" aria-labelledby="app-brand">
        <header class="site-header">
            <div class="brand-wrap">
                <a id="app-brand" href="/" class="brand">DailyMood</a>
                <div class="subtitle">Daily quotes & tiny boosts</div>
            </div>

            <nav class="site-nav" aria-label="Main navigation">
                <a href="{{ url_for('index') }}" class="nav-item {% if request.endpoint == 'index' %}nav-active{% endif %}" data-i18n="nav_home">Головна</a>
                <a href="{{ url_for('statistics') }}" class="nav-item {% if request.endpoint == 'statistics' %}nav-active{% endif %}" data-i18n="nav_statistics">Статистика</a>
                <a href="{{ url_for('journal') }}" class="nav-item {% if request.endpoint == 'journal' %}nav-active{% endif %}" data-i18n="nav_journal">Щоденник</a>
                <a href="{{ url_for('goals') }}" class="nav-item {% if request.endpoint == 'goals' %}nav-active{% endif %}" data-i18n="nav_goals">Цілі</a>
                <a href="{{ url_for('about') }}" class="nav-item {% if request.endpoint == 'about' %}nav-active{% endif %}" data-i18n="nav_about">Про нас</a>
                <a href="{{ url_for('favorites') }}" class="nav-item {% if request.endpoint == 'favorites' %}nav-active{% endif %}" data-i18n="nav_favorites">Обрані</a>
                <div id="nav-underline" aria-hidden="true"></div>
            </nav>

            <div class="header-controls">
                <select id="languageSelect" class="lang-select" aria-label="Select language">
                    <option value="uk">ua</option>
                    <option value="en">eng</option>
                </select>
                <label id="theme-toggle-center" style="display:inline-block;cursor:pointer;" title="Toggle dark mode">
                    <input type="checkbox" id="toggle" aria-label="Toggle dark mode" style="opacity:0;position:absolute;width:56px;height:28px;">
                    <svg aria-hidden="true" viewBox="0 0 80 40" width="56" height="28" role="img">
                        <g id="container">
                            <rect id="patches" x="0" y="0" width="80" height="40" rx="20" fill="#dbeafe"></rect>
                            <g id="stars" transform="translate(6,7)">
                                <circle cx="6" cy="6" r="1.4" fill="#fff"></circle>
                                <circle cx="16" cy="10" r="1" fill="#fff"></circle>
                            </g>
                            <g id="cloud" transform="translate(4,11)" opacity="1">
                                <path d="M10 12h28a8 8 0 0 0 0-16 10 10 0 0 0-20 0 6 6 0 0 0-8 8z" fill="#fff"></path>
                            </g>
                            <g id="sun" transform="translate(8,8)" opacity="1">
                                <circle cx="28" cy="12" r="6" fill="#f59e0b"></circle>
                            </g>
                            <g id="moon" transform="translate(8,8)" opacity="0">
                                <path d="M32 12a8 8 0 1 1-7-11 7 7 0 0 0 7 11z" fill="#fff"></path>
                            </g>
                            <g id="button" transform="translate(2,6)">
                                <rect x="2" y="2.333" width="24" height="18" rx="9" fill="#fff"></rect>
                            </g>
                        </g>
                    </svg>
                </label>
            </div>
        </header>

        <main class="main">
            {% block content %}{% endblock %}
        </main>

        <footer style="padding:14px 22px;border-top:1px solid rgba(0,0,0,0.04);background:transparent;text-align:center;color:var(--muted);font-size:0.9rem;">
            Made with calm in mind — DailyMood
        </footer>
    </div>

    <script src="{{ url_for('static', filename='script.js') }}"></script>
    {% block extra_scripts %}{% endblock %}
</body>
</html>